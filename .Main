import javax.swing.*;
import java.awt.*;
import java.text.ParseException;
import java.text.SimpleDateFormat;
import java.util.HashMap;


public class Main {
    private static JFrame frame;

    public static void main(String[] args) throws ParseException {
        // Crear mapa de atracciones y agregar atracciones precargadas
        HashMap<String, Atraccion> atracciones = new HashMap<>();
        atracciones.put("Montaña rusa", new Atraccion("Montaña rusa", 30, 10));
        atracciones.put("Carrusel", new Atraccion("Carrusel", 20, 15));

        // Inicializar parque
        Parque parqueCentral = new Parque("PUCV LANDIA", atracciones, 8, 18);

        // Crear un formato de fecha
        SimpleDateFormat sdf = new SimpleDateFormat("dd/MM/yyyy HH:mm");

        // Crear reservas
        Reserva reserva1 = new Reserva(10, atracciones.get("Montaña rusa"), sdf.parse("10/09/2024 14:00"));
        Reserva reserva2 = new Reserva(15, atracciones.get("Montaña rusa"), sdf.parse("10/09/2024 15:00"));

        // Agregar reservas a la atracción "Montaña rusa"
        atracciones.get("Montaña rusa").agregarReserva(reserva1);
        atracciones.get("Montaña rusa").agregarReserva(reserva2);

        // Llamar al menú principal
        mostrarMenuPrincipal(parqueCentral);
    }

    public static void mostrarMenuPrincipal(Parque parqueCentral) {
        // Crear interfaz gráfica con JFrame
        frame = new JFrame("Menú Principal - SIA");
        frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
        frame.setSize(400, 300);
        frame.setLayout(new GridLayout(5, 1));
        frame.setLocationRelativeTo(null); // Para centrar el JFrame en la pantalla

        JLabel lblTitulo = new JLabel("Bienvenido a PUCV LANDIA", SwingConstants.CENTER);
        lblTitulo.setFont(new Font("Arial", Font.BOLD, 18));
        frame.add(lblTitulo);

        JButton btnGestionAtracciones = new JButton("Gestión de Atracciones");
        JButton btnGestionReservas = new JButton("Gestión de Reservas");
        JButton btnGestionParque = new JButton("Gestión de Parque y Estadísticas");
        JButton btnSalir = new JButton("Salir");

        frame.add(btnGestionAtracciones);
        frame.add(btnGestionReservas);
        frame.add(btnGestionParque);
        frame.add(btnSalir);

        // Acción del botón "Gestión de Atracciones"
        btnGestionAtracciones.addActionListener(e -> {
            frame.dispose(); // Cerrar menú principal
            GestorAtracciones gestorAtracciones = new GestorAtracciones(parqueCentral);
        });

        // Acción del botón "Gestión de Reservas"
        btnGestionReservas.addActionListener(e -> {
            frame.dispose(); // Cerrar menú principal
            GestorReservas gestorReservas = new GestorReservas(parqueCentral);
        });

        // Acción del botón "Gestión de Parque y Estadísticas"
        btnGestionParque.addActionListener(e -> {
            frame.dispose(); // Cerrar menú principal
            GestorParque gestorParque = new GestorParque(parqueCentral);
        });

        // Acción del botón "Salir"
        btnSalir.addActionListener(e -> {
            int respuesta = JOptionPane.showConfirmDialog(frame, "¿Está seguro que desea salir?", "Confirmación", JOptionPane.YES_NO_OPTION);
            if (respuesta == JOptionPane.YES_OPTION) {
                JOptionPane.showMessageDialog(frame, "Saliendo...");
                System.exit(0); // Cerrar la aplicación
            }
        });

        // Mostrar la ventana
        frame.setVisible(true);
    }
}
